#! /bin/bash
set -e

# Check if --hot flag is passed
if [[ "$*" == *"--hot"* ]]; then
  echo "Installing dependencies and generating Prisma client..."
  bun install
  
  echo "Starting server in dev mode with hot reload..."
  exec bun run dev
else
  echo "Installing dependencies and generating Prisma client..."
  bun install
  
  echo "Building server..."
  bun run build

  echo "Starting server..."
  exec bun run start
fi